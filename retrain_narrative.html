
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Three Months Later… &#8212; MLOPs Primer</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Drift" href="ddrift_narrative.html" />
    <link rel="prev" title="Model Deployment" href="deploy_model.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/aml_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">MLOPs Primer</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Welcome
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Pre-Production
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="business_problem.html">
   The Business Scenario
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dataset.html">
   The Dataset
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exploratory_analysis.html">
   Exploratory Data Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="train_model.html">
   Model Training
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="deploy_model.html">
   Model Deployment
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Post-Production
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Three Months Later…
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ddrift_narrative.html">
   Data Drift
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cdrift_narrative.html">
   Concept Drift
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="black_swan.html">
   Black Swan
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Other
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="economics.html">
   Solution Costs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="year_in_review.html">
   A Year in Review
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="install.html">
   Next Steps
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/retrain_narrative.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#necessary-steps">
   Necessary Steps
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#other-considerations">
   Other Considerations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pipelines-vs-raw-scripts">
     Pipelines vs. Raw Scripts
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparing-the-two-models">
     Comparing the two models
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#background-context">
   Background Context
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Three Months Later…</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#necessary-steps">
   Necessary Steps
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#other-considerations">
   Other Considerations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pipelines-vs-raw-scripts">
     Pipelines vs. Raw Scripts
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparing-the-two-models">
     Comparing the two models
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#background-context">
   Background Context
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="three-months-later">
<h1>Three Months Later…<a class="headerlink" href="#three-months-later" title="Permalink to this headline">¶</a></h1>
<p>A few months into the use of the churn model, the business is pleased at some of the early progress. Though
the churn rate has not dramatically improved, this was largely expected in the short-term. On the positive side, the
marketing team is aggressively using the model to prioritize outreach and learn customer pain points that
may lead to churn. This is exactly the short-term cultural push the business is looking to drive as other
processes and systems modernize to enhance the customer experience.</p>
<p>The MLOps team is encouraged by this progress. However, three months have passed since the initial model was
put in operation. While no significant model performance degradation has occurred, the MLOps team would
like to ensure the model in operation is not based on data that is older by three months. As before, this
requires taking the most recent snapshot of customer activity and labeling the ‘ground truth’ for which
customers have churned (at that point in time, as per the established definition).</p>
<div class="section" id="necessary-steps">
<h2>Necessary Steps<a class="headerlink" href="#necessary-steps" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p><strong>Artifact the new batch of data.</strong> The new batch of data (the <code class="docutils literal notranslate"><span class="pre">Retrain</span> <span class="pre">Dataset</span></code>) needs to be registered in the
workspace. This helps with data lineage and reproducability of results. This dataset contains the same
attributes, and relative relationship of churn as the <code class="docutils literal notranslate"><span class="pre">Transformed</span> <span class="pre">Training</span> <span class="pre">Baseline</span> <span class="pre">Dataset</span></code>. More details
on how this was created is in the <em>Background Context</em> section below.</p></li>
<li><p><strong>Train the model.</strong> With the <code class="docutils literal notranslate"><span class="pre">Retrain</span> <span class="pre">Dataset</span></code>, a new training run using AutoML can be triggered to find
the best model. The results of the various models evaluated is shown below:
<img alt="retrain_models" src="_images/retrain_models.jpg" /></p></li>
<li><p><strong>Check the test results.</strong> In the prior section, when we created a pipeline, we also had a discrete step to
breakout training and test datasets, based on a 90/10 ratio. In this approach, that split can be specified as
part of the AutoML configuration. Once the training is done, an automatic testing run is triggered using
the best model. Results can be viewed in the studio experience. <img alt="retrain_test_data" src="_images/retrain_test_data.jpg" /></p></li>
<li><p><strong>Create an endpoint.</strong> To support the business, the best model out of this run can be used to create the <code class="docutils literal notranslate"><span class="pre">retrain-endpoint</span></code>. This
will provide a real-time endpoint to test predictions against the new model.
<img alt="retrain_endpoint" src="_images/retrain_endpoint.png" /></p></li>
</ol>
</div>
<div class="section" id="other-considerations">
<h2>Other Considerations<a class="headerlink" href="#other-considerations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pipelines-vs-raw-scripts">
<h3>Pipelines vs. Raw Scripts<a class="headerlink" href="#pipelines-vs-raw-scripts" title="Permalink to this headline">¶</a></h3>
<p>In most scenarios, re-using the original pipeline would be the best practice for re-training. If you recall,
in the <em>Model Training</em> section, this was the suggested best practice. Pipelines help preserve the consistency of
the data transformations and the reproducibility of the process. However, one can also train with consistent use of
versioned scripts without a pipeline, preserving data lineage, tracking, and experiment recreation. To show this
optionality, this new model is triggered through scripts that call the AutoML configuration to train the best
model.</p>
</div>
<div class="section" id="comparing-the-two-models">
<h3>Comparing the two models<a class="headerlink" href="#comparing-the-two-models" title="Permalink to this headline">¶</a></h3>
<p>Given that model performance never degraded significantly and the real driver for the re-train was to avoid a
model derived off stale data, in theory, the retrained model should be relatively consistent with the baseline model.</p>
<p>To test this, we can run two operations:</p>
<ol class="simple">
<li><p>Score the new data (<code class="docutils literal notranslate"><span class="pre">Retrain</span> <span class="pre">Dataset</span></code>) on the old model endpoint (<code class="docutils literal notranslate"><span class="pre">baseline-model-endpoint</span></code>). If this is
relatively consistent (i.e. no major data drifts), the accuracy should be relatively close.</p></li>
<li><p>Score the old data (<code class="docutils literal notranslate"><span class="pre">Transformed</span> <span class="pre">Training</span> <span class="pre">Baseline</span> <span class="pre">Dataset</span></code>) on the new model endpoint
(<code class="docutils literal notranslate"><span class="pre">retrain-endpoint</span></code>).</p></li>
</ol>
<p>By scripting these two operations, we find that the error rates are about ~20% which is fairly consistent.
Based on this, both models are close in predictive accuracy largely because they are based on
fundamentally <em>similar distributions and attribute relationships</em>.  With this, the new re-trained model can be promoted to be the production model for the marketing team.
<img alt="compare_two_models" src="_images/compare_two_models.gif" /></p>
</div>
</div>
<div class="section" id="background-context">
<h2>Background Context<a class="headerlink" href="#background-context" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>To construct this scenario, the <code class="docutils literal notranslate"><span class="pre">Retrain</span> <span class="pre">Dataset</span></code> was a simulated version of the original data. The overall
churn and attribute relationships were preserved from the baseline dataset while the customer count was
randomly assigned within certain limits. More details are in the <code class="docutils literal notranslate"><span class="pre">modeling</span></code> folder of the repo.</p></li>
<li><p>As mentioned in the first section, establishing ground truth for a customer that has actually churned is not
always straightforward. One can standardize a definition (for example: “a customer has churned if they have
not used the service for greater than 30 days”), but in some cases, you may know a customer has churned
sooner (support calls, bad customer experience). Customers who were previously classified as ‘churned’ may
also return. For the purposes of the above illustration, we are ignoring these factors.</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="deploy_model.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Model Deployment</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="ddrift_narrative.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Data Drift</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By The Jupyter Book community<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>